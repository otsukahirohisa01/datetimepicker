{"version":3,"sources":["../src/js/datetimepicker.js"],"names":[],"mappings":"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","file":"datetimepicker.js","sourcesContent":["\nconst datetimepicker = ((element) => {\n\n  // Constants\n  const DAY_OF_WEEKS = [\n    \"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"\n  ];\n\n  // Class Definition\n  class DateTimePicker {\n    constructor(element) {\n      // Private members\n      this._element = element;\n      this._calendarRootElm = null;\n      this._isDisplayed = false;\n      this._selectedDate = new Date();\n      this._locale = \"en-US\";\n      // Setup\n      this._setListeners();\n    }\n\n    // Private Functions\n    _setListeners() {\n      this._element.addEventListener('click', e => {\n        console.log(\"element clicked\");\n        if (this._isDisplayed === false) {\n          console.log(\"will call show\");\n          this._show();\n        } else {\n          console.log(\"will call hide\");\n          this._hide();\n        }\n        e.stopPropagation();  //TODO: Check more\n      });\n\n      //TODO: Check more\n      document.addEventListener('click', e => {\n        console.log(\"document clicked\");\n        if (e.currentTarget !== this._element && this._isDisplayed) {\n          console.log(\"will call hide\");\n          this._hide();\n        }\n      });\n    }\n\n    _show() {\n      this._calendarRootElm = this._getWidgetFragment();\n      this._element.appendChild(this._calendarRootElm);\n      this._isDisplayed = true;\n    }\n\n    _hide() {\n      this._element.removeChild(this._calendarRootElm);\n      this._calendarRootElm = null;\n      this._isDisplayed = false;\n    }\n\n    _update() {\n      this._element.removeChild(this._calendarRootElm);\n      this._calendarRootElm = this._getWidgetFragment();\n      this._element.appendChild(this._calendarRootElm);\n    }\n\n    _getWidgetFragment() {\n      let calendarRootElm = document.createElement('div');\n      calendarRootElm.classList.toggle('dropdown-menu');\n      calendarRootElm.appendChild(this._getMonthSelectorElm());\n      let table = document.createElement('table');\n      table.classList.toggle('calendar-table');\n      table.appendChild(this._getCalenderHeaderElm());\n      table.appendChild(this._getCalendarBodyElm());\n      calendarRootElm.appendChild(table);\n      return calendarRootElm;\n    }\n\n    //TODO:\n    _getCalenderHeaderElm() {\n      // Day of weeks header\n      let dayOfWeeksTr = document.createElement('tr');\n      for (const dayOfWeek of DAY_OF_WEEKS) {\n        let dayOfWeekTh = document.createElement('th');\n        dayOfWeekTh.classList.toggle('day-of-weeks');\n        dayOfWeekTh.appendChild(document.createTextNode(dayOfWeek));\n        dayOfWeeksTr.appendChild(dayOfWeekTh);\n      }\n      // thead\n      let thead = document.createElement('thead');\n      //thead.appendChild(this._getMonthSelectorElm());\n      thead.appendChild(dayOfWeeksTr);\n\n      // header fragment\n      let headerFragment = document.createDocumentFragment();\n      headerFragment.appendChild(thead);\n      return headerFragment;\n    }\n\n    _getMonthSelectorElm() {\n      // Previous month\n      let prev = document.createElement('span');\n      prev.classList.toggle('prev');\n      prev.addEventListener('click', e => {\n        this._selectedDate = new Date(this._selectedDate.getFullYear(), this._selectedDate.getMonth() - 1, this._selectedDate.getDate());\n        this._update();\n        e.stopPropagation();\n      })\n      prev.appendChild(document.createTextNode(\"<\"));\n\n      // This month\n      let month = document.createElement('span');\n      month.classList.toggle('month');\n      month.appendChild(document.createTextNode(new Intl.DateTimeFormat(this._locale, {month:'long', year: 'numeric'}).format(this._selectedDate)));\n      \n      // Next month\n      let next = document.createElement('span');\n      next.classList.toggle('next');\n      next.addEventListener('click', e => {\n        this._selectedDate = new Date(this._selectedDate.getFullYear(), this._selectedDate.getMonth() + 1, this._selectedDate.getDate());\n        this._update();\n        e.stopPropagation();\n      })\n      next.appendChild(document.createTextNode(\">\"));\n\n      // Block\n      let selectMonthTr = document.createElement('div');\n      selectMonthTr.classList.toggle('select-month-area');\n      selectMonthTr.appendChild(prev);\n      selectMonthTr.appendChild(month);\n      selectMonthTr.appendChild(next);\n      return selectMonthTr;\n    }\n\n    _getCalendarBodyElm() {\n      let datesArray = this._getCalendarDatesOf(this._selectedDate);\n      let calendarBody = document.createElement('tbody');\n      for (let i = 0; i < datesArray.length / 7; i++) {\n        let weekTr = document.createElement('tr');\n        for (let j = 1; j <= 7 && i*7+j < datesArray.length; j++) {\n          let weekTd = document.createElement('td');\n          weekTd.classList.toggle('day');\n          weekTd.appendChild(document.createTextNode(datesArray[i*7+j]));\n          weekTr.appendChild(weekTd);\n        }\n        calendarBody.appendChild(weekTr);\n      }\n      return calendarBody;\n    }\n\n    // Date utils\n    _getCalendarDatesOf(targetDate) {\n      var dayOfFirst = (new Date(targetDate.getFullYear(), targetDate.getMonth())).getDay();\n      var lastDateOfThisMonth = (new Date(targetDate.getFullYear(), targetDate.getMonth() + 1, 0)).getDate();\n      let n = dayOfFirst + lastDateOfThisMonth > 35 ? 42 : 35;\n      var arr = new Array(n);\n      for (var i = 1; i <= n; i++) {\n        if (i <= dayOfFirst) { // last month\n          arr[i] = \"\";\n        } else if (i > dayOfFirst + lastDateOfThisMonth) { // next month\n          arr[i] = \"\";\n        } else {\n          arr[i] = i - dayOfFirst;\n        }\n      }\n      return arr;\n    }\n  }\n\n  // Construct object\n  new DateTimePicker(element);\n});\n"]}